c[str_detect(c, "aspiration")==TRUE]
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 + district_1 + district_2 + district_3 + district_4 + B_Sgrade6 + E_Saspiration_index2_m + aspiration,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 + gender_grade + B_Sgrade6 + B_Saspiration_index2_flag + B_Saspiration_index2_m + aspiration,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 + gender_grade + B_Sgrade6 + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 + B_Saspiration_index2_flag ,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 + E2_Saspiration_index2_i, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 + E2_Saspiration_index2, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
final_data$aspiration
final_data$E2_Saspiration_index2
final_data$E2_Saspiration_index2_i_d
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag2 + E_Shighest_educ_median_flag2 + E_Sdiscuss_educ_flag2 +
E_Soccupa_25_white_flag2 + E_Scont_educ_flag2, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE])
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE & attrition_el==1])
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE]) # & attrition_el==0
summary(aspiration1)
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2+ B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE])
summary(aspiration1)
View(final_data)
aspiration_with_sfe <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag +
factor(B_stratum), # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE]) # & attrition_el==0
summary(aspiration1)
# aspiration -------------
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE]) # & attrition_el==0
summary(aspiration1)
aspiration_with_sfe <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag +
factor(B_stratum), # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE]) # & attrition_el==0
summary(aspiration_with_sfe)
## gender -------------
gender1 <- lm(E_Sgender_index2 ~ B_treat + B_Sgender_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Swives_less_edu_n_flag + E_Select_woman_y_flag +
E_Sboy_more_oppo_n_flag + E_Stown_studies_y_flag +
E_Sman_final_deci_n_flag + E_Swoman_viol_n_flag +
E_Scontrol_daughters_n_flag + E_Swoman_role_home_n_flag +
E_Smen_better_suited_n_flag + E_Ssimilar_right_y_flag +
E_Smarriage_more_imp_n_flag + E_Steacher_suitable_n_flag +
E_Sgirl_marriage_age_19_flag + E_Smarriage_age_diff_m_flag +
E_Sstudy_marry_flag + E_Sallow_work_y_flag + E_Sfertility_flag,
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(gender1)
gender_with_sfe <- lm(E_Sgender_index2 ~ B_treat + B_Sgender_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Swives_less_edu_n_flag + E_Select_woman_y_flag +
E_Sboy_more_oppo_n_flag + E_Stown_studies_y_flag +
E_Sman_final_deci_n_flag + E_Swoman_viol_n_flag +
E_Scontrol_daughters_n_flag + E_Swoman_role_home_n_flag +
E_Smen_better_suited_n_flag + E_Ssimilar_right_y_flag +
E_Smarriage_more_imp_n_flag + E_Steacher_suitable_n_flag +
E_Sgirl_marriage_age_19_flag + E_Smarriage_age_diff_m_flag +
E_Sstudy_marry_flag + E_Sallow_work_y_flag + E_Sfertility_flag + factor(B_stratum),
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(gender_with_sfe)
beaviour1 <- lm(E_Sbehavior_index2 ~ B_treat + B_Sbehavior_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Stalk_opp_gender_comm_flag + E_Ssit_opp_gender_comm_flag +
E_Scook_clean_comm + E_Sabsent_sch_hhwork_comm_flag +
E_Sdiscourage_college_comm_flag + E_Sdiscourage_work_comm_flag,
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(beaviour1)
behaviour_with_sfe <- lm(E_Sbehavior_index2 ~ B_treat + B_Sbehavior_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Stalk_opp_gender_comm_flag + E_Ssit_opp_gender_comm_flag +
E_Scook_clean_comm + E_Sabsent_sch_hhwork_comm_flag +
E_Sdiscourage_college_comm_flag + E_Sdiscourage_work_comm_flag +
factor(B_stratum),
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(behaviour1)
behaviour1 <- lm(E_Sbehavior_index2 ~ B_treat + B_Sbehavior_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Stalk_opp_gender_comm_flag + E_Ssit_opp_gender_comm_flag +
E_Scook_clean_comm + E_Sabsent_sch_hhwork_comm_flag +
E_Sdiscourage_college_comm_flag + E_Sdiscourage_work_comm_flag,
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(behaviour1)
behaviour_with_sfe <- lm(E_Sbehavior_index2 ~ B_treat + B_Sbehavior_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Stalk_opp_gender_comm_flag + E_Ssit_opp_gender_comm_flag +
E_Scook_clean_comm + E_Sabsent_sch_hhwork_comm_flag +
E_Sdiscourage_college_comm_flag + E_Sdiscourage_work_comm_flag +
factor(B_stratum),
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(behaviour_with_sfe)
summary(behaviour1)
result_table_dhar <- data.table(outcome = NA_character_, no_sfe = NA_real_, with_sfe = NA_real_)
result_table_dhar$outcome <- c("Aspiration","Gender","Behaviour")
# result table
result_table_dhar <- data.table(outcome = c("Aspiration","Gender","Behaviour"), no_sfe = NA_real_, with_sfe = NA_real_)
result_table_dhar
aspiration1$coefficients[2]
result_table_dhar[1,2] <- aspiration1$coefficients[2]
result_table_dhar[1,3] <- aspiration1$coefficients[2]
result_table_dhar
result_table_dhar[1,3] <- aspiration_with_sfe$coefficients[2]
result_table_dhar
###############################
# date: 9/1/2022
# Groh & McKenzie application
###############################
rm(list = ls())
cat("\014")
options(scipen=999)
# install.packages("pacman") # uncomment if needed
# set seed for pilot
set.seed(3333)
pacman::p_load(ramify, fastDummies, doParallel, foreach, data.table, nbpMatching, sandwich, lmtest, haven, tidyverse, xtable, rstudioapi, readstata13)
registerDoParallel(cores = 36)
getDoParWorkers()
getDoParName()
# working directory
setwd(dirname(getSourceEditorContext()$path))
# result table
result_table_dhar <- data.table(outcome = c("Aspiration","Gender","Behaviour"), no_sfe = NA_real_, with_sfe = NA_real_)
## el_gender_Flag
# E_Swives_less_edu_n_flag E_Select_woman_y_flag
# E_Sboy_more_oppo_n_flag E_Stown_studies_y_flag
# E_Sman_final_deci_n_flag E_Swoman_viol_n_flag
# E_Scontrol_daughters_n_flag E_Swoman_role_home_n_flag
# E_Smen_better_suited_n_flag E_Ssimilar_right_y_flag
# E_Smarriage_more_imp_n_flag E_Steacher_suitable_n_flag
# E_Sgirl_marriage_age_19_flag E_Smarriage_age_diff_m_flag
# E_Sstudy_marry_flag E_Sallow_work_y_flag E_Sfertility_flag
# el_behavior_decision_girl_flag:
#   E_Sfuture_work_g_flag E_Sdecision_past_tenth_g_flag
# E_Sdecision_work_g_flag E_Sdecision_kindofwork_g_flag
# E_Sabsent_sch_g_flag
# el_behavior_relatives_flag:
#   E_Sdiscourage_college_comm_flag E_Sdiscourage_work_comm_flag
# el_behavior_hhchores_flag:
#   E_Scook_clean_comm_flag E_Sabsent_sch_hhwork_comm_flag
# el_behavior_oppsex_flag:
#   E_Stalk_opp_gender_comm_flag E_Ssit_opp_gender_comm_flag
# el_sub_flag:    E_Select_woman_y_flag E_Sman_final_deci_n_flag
# E_Swoman_viol_n_flag E_Scontrol_daughters_n_flag
# E_Ssimilar_right_y_flag E_Sgirl_marriage_age_19_flag
# E_Smarriage_age_diff_m_flag E_Sstudy_marry_flag
# el_behavior_boy_nv_flag:
#   E_Stalk_opp_gender_b_flag E_Ssit_opp_gender_b_flag
# E_Scook_clean_b_flag E_Sabsent_sch_hhwork_b_flag
# E_Sdiscourage_work_b_flag E_Sdiscourage_college_b_flag
# E_Shh_shopping_b E_Stake_care_young_sib_b
# el_behavior_common_flag:
#   E_Stalk_opp_gender_comm_flag E_Ssit_opp_gender_comm_flag
# E_Scook_clean_comm E_Sabsent_sch_hhwork_comm_flag
# E_Sdiscourage_college_comm_flag E_Sdiscourage_work_comm_flag
# el_behavior_boy_flag:
#   E_Stalk_opp_gender_b_flag E_Ssit_opp_gender_b_flag
# E_Scook_clean_b_flag E_Sabsent_sch_hhwork_b_flag
# E_Sdiscourage_work_b_flag E_Sdiscourage_college_b_flag
# el_behavior_girl_flag:
#   E_Stalk_opp_gender_g_flag E_Ssit_opp_gender_g_flag
# E_Scook_clean_g_flag E_Sfuture_work_g_flag
# E_Sdecision_past_tenth_g_flag E_Sdecision_work_g_flag
# E_Sdecision_kindofwork_g_flag E_Salone_friend_g_flag
# E_Sabsent_sch_g_flag E_Sabsent_sch_hhwork_g_flag
# E_Sdiscourage_work_g_flag E_Sdiscourage_college_g_flag
# data -----------------
final_data <- as.data.table(readstata13::read.dta13("data/bt_analysis_final.dta"))
# aspiration -------------
aspiration1 <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag, # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE]) # & attrition_el==0
summary(aspiration1)
result_table_dhar[1,2] <- aspiration1$coefficients[2]
aspiration_with_sfe <- lm(E_Saspiration_index2 ~ B_treat + B_Saspiration_index2 + district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 + B_Sgrade6 +
E_Sboard_score_median_flag + E_Shighest_educ_median_flag + E_Sdiscuss_educ_flag +
E_Soccupa_25_white_flag + E_Scont_educ_flag +
factor(B_stratum), # + B_Saspiration_index2_flag + B_Saspiration_index2_m,
data = final_data[B_Sgirl==1 & is.na(E_Steam_id)==FALSE]) # & attrition_el==0
summary(aspiration_with_sfe)
result_table_dhar[1,3] <- aspiration_with_sfe$coefficients[2]
## gender -------------
gender1 <- lm(E_Sgender_index2 ~ B_treat + B_Sgender_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Swives_less_edu_n_flag + E_Select_woman_y_flag +
E_Sboy_more_oppo_n_flag + E_Stown_studies_y_flag +
E_Sman_final_deci_n_flag + E_Swoman_viol_n_flag +
E_Scontrol_daughters_n_flag + E_Swoman_role_home_n_flag +
E_Smen_better_suited_n_flag + E_Ssimilar_right_y_flag +
E_Smarriage_more_imp_n_flag + E_Steacher_suitable_n_flag +
E_Sgirl_marriage_age_19_flag + E_Smarriage_age_diff_m_flag +
E_Sstudy_marry_flag + E_Sallow_work_y_flag + E_Sfertility_flag,
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(gender1)
result_table_dhar[2,2] <- gender1$coefficients[2]
gender_with_sfe <- lm(E_Sgender_index2 ~ B_treat + B_Sgender_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Swives_less_edu_n_flag + E_Select_woman_y_flag +
E_Sboy_more_oppo_n_flag + E_Stown_studies_y_flag +
E_Sman_final_deci_n_flag + E_Swoman_viol_n_flag +
E_Scontrol_daughters_n_flag + E_Swoman_role_home_n_flag +
E_Smen_better_suited_n_flag + E_Ssimilar_right_y_flag +
E_Smarriage_more_imp_n_flag + E_Steacher_suitable_n_flag +
E_Sgirl_marriage_age_19_flag + E_Smarriage_age_diff_m_flag +
E_Sstudy_marry_flag + E_Sallow_work_y_flag + E_Sfertility_flag + factor(B_stratum),
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(gender_with_sfe)
result_table_dhar[2,3] <- gender_with_sfe$coefficients[2]
## beaviour ---------------
behaviour1 <- lm(E_Sbehavior_index2 ~ B_treat + B_Sbehavior_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Stalk_opp_gender_comm_flag + E_Ssit_opp_gender_comm_flag +
E_Scook_clean_comm + E_Sabsent_sch_hhwork_comm_flag +
E_Sdiscourage_college_comm_flag + E_Sdiscourage_work_comm_flag,
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(behaviour1)
result_table_dhar[3,2] <- behaviour1$coefficients[2]
behaviour_with_sfe <- lm(E_Sbehavior_index2 ~ B_treat + B_Sbehavior_index2 +
district_gender +
district_gender_1 + district_gender_2 + district_gender_3 + district_gender_4 + district_gender_5 +
district_gender_6 + district_gender_7 + district_gender_8 +
gender_grade + gender_grade_1 + gender_grade_2 + gender_grade_3 + gender_grade_4 +
E_Stalk_opp_gender_comm_flag + E_Ssit_opp_gender_comm_flag +
E_Scook_clean_comm + E_Sabsent_sch_hhwork_comm_flag +
E_Sdiscourage_college_comm_flag + E_Sdiscourage_work_comm_flag +
factor(B_stratum),
data = final_data[is.na(E_Steam_id)==FALSE & attrition_el==0]) # & attrition_el==0
summary(behaviour_with_sfe)
result_table_dhar[3,3] <- behaviour_with_sfe$coefficients[2]
# save point estimates results ----------
fwrite(result_table_dhar, "dhar-main-results.csv")
View(result_table_dhar)
final_data <- as.data.table(read_dta("data/original/Moz1234panel.dta"))
###############################
# date: 9/1/2022
# Groh & McKenzie application
###############################
rm(list = ls())
cat("\014")
options(scipen=999)
# install.packages("pacman") # uncomment if needed
# set seed for pilot
set.seed(3333)
pacman::p_load(ramify, fastDummies, doParallel, foreach, data.table, nbpMatching, sandwich, lmtest, haven, tidyverse, xtable, rstudioapi)
registerDoParallel(cores = 36)
getDoParWorkers()
getDoParName()
# working directory
setwd(dirname(getSourceEditorContext()$path))
# data -----------------
final_data <- as.data.table(read_dta("data/original/Moz1234panel.dta"))
final_data <- as.data.table(read_dta("data/original/Moz1234panel.dta"))
lm(lfertmaizr ~ vouch_dur vouch_aft sn2up_sub_dur sn2up_sub_aft, data = final_data)
lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft, data = final_data)
lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
lfertmizr1 <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
lfertmizr1 <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lfertmizr1)
lfertmizr1_without_sfe <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lfertmizr1_without_sfe)
result_carter_dhar <- data.table(outcome = c("Fertilizer","Improved seed","Maize yield", "Consumption", "Expected yield"), no_sfe = NA_real_, with_sfe = NA_real_)
result_carter_dhar <- data.table(outcome = rep(c("Fertilizer","Improved seed","Maize yield", "Consumption", "Expected yield"), each = 2), before_after = rep(c("before","after"), times = 5), no_sfe = NA_real_, with_sfe = NA_real_)
View(result_carter_dhar)
result_carter_dhar <- data.table(outcome = rep(c("Fertilizer","Improved seed","Maize yield", "Consumption", "Expected yield"), each = 2), before_after = rep(c("before","after"), times = 5), no_sfe = NA_real_, with_sfe = NA_real_)
# outcome 1 ---------------
lfertmizr1 <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lfertmizr1)
result_carter_dhar[1,4] <- lfertmizr1$coefficients[2]
result_carter_dhar[2,4] <- lfertmizr1$coefficients[3]
lfertmizr1_without_sfe <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lfertmizr1_without_sfe)
result_carter_dhar[1,3] <- lfertmizr1_without_sfe$coefficients[2]
result_carter_dhar[2,3] <- lfertmizr1_without_sfe$coefficients[3]
View(result_carter_dhar)
# outcome 2 ---------------
limprovedseedsr1 <- lm(limprovedseedsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(limprovedseedsr1)
result_carter_dhar[3,4] <- limprovedseedsr1$coefficients[2]
result_carter_dhar[4,4] <- limprovedseedsr1$coefficients[3]
limprovedseedsr_without_sfe <- lm(limprovedseedsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lfertmizr1_without_sfe)
result_carter_dhar[3,3] <- llimprovedseedsr_without_sfe$coefficients[2]
View(result_carter_dhar)
result_carter_dhar[3,3] <- limprovedseedsr_without_sfe$coefficients[2]
result_carter_dhar[4,3] <- limprovedseedsr_without_sfe$coefficients[3]
View(result_carter_dhar)
# outcome 3 ---------------
lyieldr1 <- lm(lyieldr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lyieldr1)
result_carter_dhar[5,4] <- lyieldr1$coefficients[2]
result_carter_dhar[6,4] <- lyieldr1$coefficients[3]
lyieldr_without_sfe <- lm(lyieldr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lyieldr_without_sfe)
result_carter_dhar[5,3] <- lyieldr_without_sfe$coefficients[2]
result_carter_dhar[6,3] <- lyieldr_without_sfe$coefficients[3]
View(result_carter_dhar)
# outcome 4 ---------------
ldailyconsr1 <- lm(ldailyconsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(ldailyconsr1)
result_carter_dhar[7,4] <- ldailyconsr1$coefficients[2]
result_carter_dhar[8,4] <- ldailyconsr1$coefficients[3]
ldailyconsr_without_sfe <- lm(ldailyconsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(ldailyconsr_without_sfe)
result_carter_dhar[7,3] <- ldailyconsr_without_sfe$coefficients[2]
result_carter_dhar[8,3] <- ldailyconsr_without_sfe$coefficients[3]
View(result_carter_dhar)
# outcome 5 ---------------
lexp_yield_fertr1 <- lm(lexp_yield_fertr1 ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
# outcome 5 ---------------
lexp_yield_fertr1 <- lm(lexp_yield_fertr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lexp_yield_fertr1)
result_carter_dhar[9,4] <- lexp_yield_fertr1$coefficients[2]
result_carter_dhar[10,4] <- lexp_yield_fertr1$coefficients[3]
lexp_yield_fertr_without_sfe <- lm(lexp_yield_fertr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lexp_yield_fertr_without_sfe)
result_carter_dhar[9,3] <- lexp_yield_fertr_without_sfe$coefficients[2]
result_carter_dhar[10,3] <- lexp_yield_fertr_without_sfe$coefficients[3]
View(result_carter_dhar)
###############################
# date: 9/1/2022
# Groh & McKenzie application
###############################
rm(list = ls())
cat("\014")
options(scipen=999)
# install.packages("pacman") # uncomment if needed
# set seed for pilot
set.seed(3333)
pacman::p_load(ramify, fastDummies, doParallel, foreach, data.table, nbpMatching, sandwich, lmtest, haven, tidyverse, xtable, rstudioapi)
registerDoParallel(cores = 36)
getDoParWorkers()
getDoParName()
# working directory
setwd(dirname(getSourceEditorContext()$path))
# data -----------------
final_data <- as.data.table(read_dta("data/original/Moz1234panel.dta"))
# result table
result_table_carter <- data.table(outcome = rep(c("Fertilizer","Improved seed","Maize yield", "Consumption", "Expected yield"), each = 2), before_after = rep(c("before","after"), times = 5), no_sfe = NA_real_, with_sfe = NA_real_)
# outcome 1 ---------------
lfertmizr1 <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lfertmizr1)
result_table_carter[1,4] <- lfertmizr1$coefficients[2]
result_table_carter[2,4] <- lfertmizr1$coefficients[3]
lfertmizr1_without_sfe <- lm(lfertmaizr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lfertmizr1_without_sfe)
result_table_carter[1,3] <- lfertmizr1_without_sfe$coefficients[2]
result_table_carter[2,3] <- lfertmizr1_without_sfe$coefficients[3]
# outcome 2 ---------------
limprovedseedsr1 <- lm(limprovedseedsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(limprovedseedsr1)
result_table_carter[3,4] <- limprovedseedsr1$coefficients[2]
result_table_carter[4,4] <- limprovedseedsr1$coefficients[3]
limprovedseedsr_without_sfe <- lm(limprovedseedsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lfertmizr1_without_sfe)
result_table_carter[3,3] <- limprovedseedsr_without_sfe$coefficients[2]
result_table_carter[4,3] <- limprovedseedsr_without_sfe$coefficients[3]
# outcome 3 ---------------
lyieldr1 <- lm(lyieldr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lyieldr1)
result_table_carter[5,4] <- lyieldr1$coefficients[2]
result_table_carter[6,4] <- lyieldr1$coefficients[3]
lyieldr_without_sfe <- lm(lyieldr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lyieldr_without_sfe)
result_table_carter[5,3] <- lyieldr_without_sfe$coefficients[2]
result_table_carter[6,3] <- lyieldr_without_sfe$coefficients[3]
# outcome 4 ---------------
ldailyconsr1 <- lm(ldailyconsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(ldailyconsr1)
result_table_carter[7,4] <- ldailyconsr1$coefficients[2]
result_table_carter[8,4] <- ldailyconsr1$coefficients[3]
ldailyconsr_without_sfe <- lm(ldailyconsr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(ldailyconsr_without_sfe)
result_table_carter[7,3] <- ldailyconsr_without_sfe$coefficients[2]
result_table_carter[8,3] <- ldailyconsr_without_sfe$coefficients[3]
# outcome 5 ---------------
lexp_yield_fertr1 <- lm(lexp_yield_fertr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round) + factor(vlgid_round), data = final_data)
summary(lexp_yield_fertr1)
result_table_carter[9,4] <- lexp_yield_fertr1$coefficients[2]
result_table_carter[10,4] <- lexp_yield_fertr1$coefficients[3]
lexp_yield_fertr_without_sfe <- lm(lexp_yield_fertr ~ vouch_dur + vouch_aft + sn2up_sub_dur + sn2up_sub_aft + factor(nw_talkedagmoder)*factor(round), data = final_data)
summary(lexp_yield_fertr_without_sfe)
result_table_carter[9,3] <- lexp_yield_fertr_without_sfe$coefficients[2]
result_table_carter[10,3] <- lexp_yield_fertr_without_sfe$coefficients[3]
# save point estimates results ----------
fwrite(result_table_carter, "dhar-main-results.csv")
# foreach x in lfertmaizr  limprovedseedsr lyieldr ldailyconsr lexp_yield_fertr {
#   qui xi: areg `x' vouch_dur vouch_aft sn2up_sub_dur sn2up_sub_aft i.nw_talkedagmoder*i.round, absorb(vlgid_round) cluster(respid)
# 		outreg2 using "$base/results/tables/table A5.xls", `rep_app' bracket label nocons noni less(1) nor2 keep(vouch_dur vouch_aft sn2up_sub_dur sn2up_sub_aft)
#   local rep_app = "append"
# }
View(result_table_carter)
